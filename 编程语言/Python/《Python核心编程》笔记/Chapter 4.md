# Chapter 4

## Python对象

Python使用对象模型来存储数据。

所有Python对象拥有三个特性：身份，类型和值。

身份
:   每个对象都拥有一个唯一的身份标识，任何对象都可以使用内建函数 **id()** 获取身份标识。

类型
:	对象的类型决定了该对可以保存的值的类型，可以进行的操作以及遵循的规则。可以通过内建函数 **type()** 获取对象的类型。因为Python中类型也是对象，所以**type()**返回的是对象而不是一个简单的字符串。

值
:   对象表示的数据项


上述的三个特性在对象创建的时候被赋值，除了值之外，其他两个特性是只读的。

### 对象的属性

某些Python对象包含属性，如：值和相关联的可执行代码，如method。Python通过域操作符(.)来访问属性。

## 标准类型

Python中的标准类型为：

* 数字(包括整型，布尔型，长整型(Python 3中没有长整型，和整型统一了)，浮点型，复数型)
* 字符串
* 列表
* 元组
* 字典


## 其他内建类型

* None对象
* 文件
* 集合/固定集合
* 函数/方法
* 模块
* 类


### 类型对象

在Python中类型也是对象，通过内建的type()函数可以获得特定对象的类型

### Python的空对象None

Python有一个特殊的类型，被称为NULL对象或者NoneType，它只是一个值，是None。这个对象不支持任何运算，也没有内建的任何方法。None没有任何有用的属性，它的布尔值总是False。

注意：所有标准对象都可以用于布尔测试，同类型的对象之间可以进行比较大小。下列的对象布尔值是False：

* None
* False(布尔类型)
* 所有的值为零的数：
    * 整型0
    * 浮点数0
    * 长整型0L(在Python3中没有long和int的区别)
    * 复数0.0+0.0j
    * 空字符串""
    * 空列表[]
    * 空元组()
    * 空字典{}
* 定义了nonzero(\_\_nozero\_\_())或length(\_\_len\_\_())且值为0的用户自定义类类型的实例


## 内部类型

Python的内部类型包括：

* 代码
* 帧
* 跟踪记录
* 切片
* 省略
* Xrange


## 代码对象

Python的代码对象是经过编译的Python源代码片段，它是可执行对象。通过调用内建函数**compile()**可以得到代码对象。代码对象可以被 *exec* 语句或**eval()**内建函数来执行。

代码对象本身不包含任何执行环境的信息，它是用户自定义函数的核心，在被执行时动态获得上下文。

## 帧对象

帧对象表示Python的执行栈帧。帧对象包含Python解释器在运行时所需要知道的所有信息。它的属性包括指向上一个帧的链接，正在被执行的代码对象，本地以及全局名字空间字典以及当前指令等。每次函数调用产生一个新的帧，每一个帧对象都会相应创建一个C栈帧。帧对象可以用来进行跟踪记录。

## 跟踪记录对象
当代码出错时，Python就会引发一个异常。如果异常未被捕获和处理，解释器就会退出脚本运行。当异常发生时，一个包含针对异常的栈跟踪信息的跟踪记录对象被创建。如果一个异常有自己的处理程序，处理程序就可以访问这个跟踪记录对象。

## 切片对象
当使用Python扩展的切片语法时，就会创建切片对象。扩展的切片语法允许对不同的索引切片操作，包括：

* 步进切片
* 多维切片
* 省略切片

多维切片语法(numpy扩展)

~~~

sequence[start1:end1,start2:end2]

~~~

或者使用省略号：

~~~

sequence[...,start1:end1]

~~~

步进切片语法

~~~

sequence[起始索引:结束索引:步进值]

~~~

切片对象可以使用内建函数slice()来生成。

## 省略对象

省略对象用于扩展切片语法中，起记号作用。这个对象在切片语法中表示省略号。类似NULL对象的名字是**None**，省略对象有一个唯一的名字**Ellipsis**，它的布尔值始终为True

## Xrange对象

调用内建函数xrange()会生成一个Xrange对象，xrange()是内建函数range()类似版本，用于需要节省内存空间使用或range()无法完成的超大数据集的场合。

## 标准类型运算符

### 对象值得比较

比较运算符用于判断同类型对象是否相等，所有内建类型都支持比较运算符，比较运算符返回布尔值**True**和**False**，在Python2.3以前的版本中，由于没有布尔类型，返回结果为1和0。

###对象身份比较
作为对值比较的补充，Python也支持对象本身的比较。对象的赋值操作是通过传递引用实现的，因此每一个变量可能都指向同一个数据对象，只要任何一个引用发生改变，则该对象的其他引用也会随着改变

Python提供了**is**和**is not**运算符来测试两个变量是否指向同一个对象。


**注意：**

对于整数和字符串对象，Python会高效的缓存他们。这会造成在Python应该产生一个对象的时候其实在Python内部只是将缓存中的同一个对象的引用赋值给变量，造成没有创建对象的假象。
Python中仅仅对简单整数进行缓存，可能的简单整数的范围是(-1, 100)

### 布尔类型运算

布尔逻辑运算符**and**、**or**和**not**都是Python关键字。其中**not**运算符拥有较高的优先级，**and**和**or**则相应低一些。

## 标准类型内建函数

Python提供了一些内建函数用于这些标准类型：

type()
:   在Python2.2之前，type()是内建函数。不过现在type是一个工厂函数。type()内建函数接受一个对象作为参数，并返回它的类型。它的返回值是一个类型对象。

cmp()
:   内建函数cmp()用来比较两个对象obj1和obj2如果obj1小于obj2，则返回一个负整数，如果obj1大于obj2则返回一个正整数，如果相等，则返回0。对于用户自定义的对象，在进行比较的时候cmp()会调用该类的特殊方法**cmp()**。

str()和repr()
:		内建函数str()和repr()或反引号运算符(\`\`)(在Python3中不支持)可以方便的以字符串的方式获取对象的内容、类型、数值属性等信息。str()函数得到的字符串可读性好，而repr()函数得到的字符串通常可以用来重新获取该对象，通常情况下obj == eval(repr(obj))这个等式是成立的。

虽然str()和prer()以及\`\`的功能类似，实际上prer()和\`\`做的是同样的事情，他们返回的是一个对象的"官方"字符串表示，返回结果在大多数情况下是可以通过求值运算**eval()**重新获得对象的，但并不是所有的repr()函数返回的字符串都可以用于**eval()**函数求值。但是str()不同，str()的目的是获取可读性好的字符串表示。

type()和isinstance()
:   Python不支持方法或函数的重载，所以必须由使用者自己保证当前使用的函数或方法是正确的。可以通过type()函数获取需要的信息。除了type()内建函数，还有一个isinstance()内建函数。

## 类型工厂函数

Python2.2统一了类型和类，所有的内建类型现在也是类，在这个基础上，原来的所有内建转换函数被称为工厂函数，虽然这些工厂函数和函数类似，但实质上他们是类，当调用这些工厂函数的时候，实际上是生成了该类型的一个实例。

工厂函数包括：

* int(),long(),float(),complex()
* str(),unicode(),basestring()
* list(),tuple()
* type()
* dict()
* bool()
* set(),frozenset()
* object()
* classmethod()
* staticmethod()
* property()
* super()
* file()

## 标准类型的分类

存储模型
:   Python的类型，能够容纳一个或多个值。一个能够保存一个对象的类型称为原子或标量存储，可以存储多个对象的类型，称为容器存储。
    在Python中：

    ------------------------------ ---------------
     数值类型，字符串		    标量/原子存储
     列表，元组，字典			容器类型
    ------------------------------ ---------------

更新模型
:   一个对象创建成功以后，其值是否是可以被更新的，可以以此作为更新模型的划分依据。

    ----------------------- -----------------
       列表，元组              可变类型
     数字，字符串，元组	       不可变类型
    ----------------------- -----------------

访问模型
:   在访问模型中共有三种访问方式：直接存取，顺序和映射

    --------------------- --------------------------
       数字			直接存取
     字符串，列表，元组	         顺序存储
      字典			映射存储
    --------------------- --------------------------
